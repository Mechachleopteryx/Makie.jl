<!doctype html> <!-- Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes Free for personal and commercial use under the MIT license https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE --> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/previews/PR1181/libs/highlight/github.min.css"> <link rel=stylesheet  href="/previews/PR1181/css/franklin.css"> <link rel=stylesheet  href="/previews/PR1181/css/minimal-mistakes.css"> <link rel=stylesheet  href="/previews/PR1181/css/makie.css"> <link rel=icon  href="/previews/PR1181/assets/icon_transparent.png"> <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel=stylesheet  type="text/css"/> <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel=stylesheet  type="text/css"/> <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel=stylesheet  type="text/css"/> <!--[if IE ]> <style> /* old IE unsupported flexbox fixes */ .greedy-nav .site-title { padding-right: 3em; } .greedy-nav button { position: absolute; top: 0; right: 0; height: 100%; } </style> <![endif]--> <title>Legend</title> <body class=layout--single > <div class=masthead > <div class=masthead__inner-wrap > <div class=masthead__menu > <nav id=site-nav  class=greedy-nav > <a class=title-icon  href="/previews/PR1181/"><img src="/previews/PR1181/assets/makie_logo_transparent.svg"/></a> <ul class=visible-links > <li class=masthead__menu-item > <a href="https://github.com/JuliaPlots/Makie.jl"><img src="/previews/PR1181/assets/GitHub-Mark-64px.png" class=masthead-icon  /></a> <li class=masthead__menu-item ><a href="/previews/PR1181/examples/">Examples</a> <li class=masthead__menu-item ><a href="/previews/PR1181/tutorials/">Tutorials</a> <li class=masthead__menu-item ><a href="/previews/PR1181/documentation/">Documentation</a> </ul> <button class="greedy-nav__toggle hidden" type=button > <span class=visually-hidden >Toggle menu</span> <div class=navicon ></div> </button> <ul class="hidden-links hidden"></ul> </nav> </div> </div> </div> <div class=initial-content > <div id=main  role=main > <div class=franklin-content ><h1 id=legend ><a href="#legend" class=header-anchor >Legend</a></h1> <h2 id=creating_a_legend_from_elements ><a href="#creating_a_legend_from_elements" class=header-anchor >Creating A Legend From Elements</a></h2> <p>You can create a basic Legend by passing a vector of legend entries and a vector of labels, plus an optional title as the third argument.</p> <p>The elements in the vector of legend entries can either be plot objects or LegendElements like LineElement, MarkerElement and PolyElement. Or they can be vectors of such objects that will be layered together as one.</p> <h3 id=legend_element_attributes ><a href="#legend_element_attributes" class=header-anchor >Legend element attributes</a></h3> <p>The standard plot objects like <code>Scatter</code> or <code>Lines</code> have predefined conversions to <code>MarkerElement</code>s and <code>LineElement</code>s that copy the relevant plot attributes to the legend element. If an attribute has a vector-like value, it falls back to the scalar default of the legend. The legend defaults themselves are by default inherited from the main theme. For example, <code>polystrokewidth</code> of the legend falls back to <code>patchstrokewidth</code> of the main theme. In the following example, you can see that the legend for <code>sca2</code> copies the <code>:rect</code> marker but not the vector-valued color.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CairoMakie

f = Figure()

Axis(f[<span class=hljs-number >1</span>, <span class=hljs-number >1</span>])

xs = <span class=hljs-number >0</span>:<span class=hljs-number >0.5</span>:<span class=hljs-number >10</span>
ys = sin.(xs)
lin = lines!(xs, ys, color = :blue)
sca = scatter!(xs, ys, color = :red)
sca2 = scatter!(xs, ys .+ <span class=hljs-number >0.5</span>, color = <span class=hljs-number >1</span>:length(xs), marker = :rect)

Legend(f[<span class=hljs-number >1</span>, <span class=hljs-number >2</span>],
    [lin, sca, [lin, sca], sca2],
    [<span class=hljs-string >&quot;a line&quot;</span>, <span class=hljs-string >&quot;some dots&quot;</span>, <span class=hljs-string >&quot;both together&quot;</span>, <span class=hljs-string >&quot;rect markers&quot;</span>])

f</code></pre></p> <p> <a id=example_1011103331786001230 > <img src="/previews/PR1181/assets/examples/layoutables/legend/code/output/example_1011103331786001230.png" alt=""> </a> <h2 id=creating_a_legend_from_an_axis ><a href="#creating_a_legend_from_an_axis" class=header-anchor >Creating A Legend From An Axis</a></h2> <p>You can also create a Legend by passing it an axis object, like <code>Axis</code>, <code>LScene</code> or <code>Scene</code>. All plots that have a <code>label</code> attribute set will be put into the legend, in the order that they appear in the axis, and you can optionally pass a title as the third argument.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CairoMakie

f = Figure()

ax = f[<span class=hljs-number >1</span>, <span class=hljs-number >1</span>] = Axis(f)

lines!(<span class=hljs-number >0.</span><span class=hljs-number >.15</span>, sin, label = <span class=hljs-string >&quot;sin&quot;</span>, color = :blue)
lines!(<span class=hljs-number >0.</span><span class=hljs-number >.15</span>, cos, label = <span class=hljs-string >&quot;cos&quot;</span>, color = :red)
lines!(<span class=hljs-number >0.</span><span class=hljs-number >.15</span>, x -&gt; -cos(x), label = <span class=hljs-string >&quot;-cos&quot;</span>, color = :green)

f[<span class=hljs-number >1</span>, <span class=hljs-number >2</span>] = Legend(f, ax, <span class=hljs-string >&quot;Trig Functions&quot;</span>, framevisible = <span class=hljs-literal >false</span>)

f</code></pre></p> <p> <a id=example_3855389068877976802 > <img src="/previews/PR1181/assets/examples/layoutables/legend/code/output/example_3855389068877976802.png" alt=""> </a> <p>With the keywords <code>merge</code> and <code>unique</code> you can control how plot objects with the same labels are treated. If <code>merge</code> is <code>true</code>, all plot objects with the same label will be layered on top of each other into one legend entry. If <code>unique</code> is <code>true</code>, all plot objects with the same plot type and label will be reduced to one occurance.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CairoMakie

f = Figure()

traces = cumsum(randn(<span class=hljs-number >10</span>, <span class=hljs-number >5</span>), dims = <span class=hljs-number >1</span>)

<span class=hljs-keyword >for</span> (i, (merge, unique)) <span class=hljs-keyword >in</span> enumerate(
        Iterators.product([<span class=hljs-literal >false</span>, <span class=hljs-literal >true</span>], [<span class=hljs-literal >false</span> <span class=hljs-literal >true</span>]))

    ax = Axis(f[fldmod1(i, <span class=hljs-number >2</span>)...],
        title = <span class=hljs-string >&quot;merge = <span class=hljs-variable >$merge</span>, unique = <span class=hljs-variable >$unique</span>&quot;</span>)

    <span class=hljs-keyword >for</span> trace <span class=hljs-keyword >in</span> eachcol(traces)
        lines!(trace, label = <span class=hljs-string >&quot;single&quot;</span>, color = (:black, <span class=hljs-number >0.2</span>))
    <span class=hljs-keyword >end</span>

    mu = vec(sum(traces, dims = <span class=hljs-number >2</span>) ./ <span class=hljs-number >5</span>)
    lines!(mu, label = <span class=hljs-string >&quot;mean&quot;</span>)
    scatter!(mu, label = <span class=hljs-string >&quot;mean&quot;</span>)

    axislegend(ax, merge = merge, unique = unique)

<span class=hljs-keyword >end</span>

f</code></pre></p> <p> <a id=example_16556234139797033347 > <img src="/previews/PR1181/assets/examples/layoutables/legend/code/output/example_16556234139797033347.png" alt=""> </a> <h2 id=multi-bank_legend ><a href="#multi-bank_legend" class=header-anchor >Multi-Bank Legend</a></h2> <p>You can control the number of banks with the <code>nbanks</code> attribute. Banks are columns when in vertical mode, and rows when in horizontal mode.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CairoMakie

f = Figure()

Axis(f[<span class=hljs-number >1</span>, <span class=hljs-number >1</span>])

xs = <span class=hljs-number >0</span>:<span class=hljs-number >0.1</span>:<span class=hljs-number >10</span>
lins = [lines!(xs, sin.(xs .+ <span class=hljs-number >3</span>v), color = RGBf0(v, <span class=hljs-number >0</span>, <span class=hljs-number >1</span>-v)) <span class=hljs-keyword >for</span> v <span class=hljs-keyword >in</span> <span class=hljs-number >0</span>:<span class=hljs-number >0.1</span>:<span class=hljs-number >1</span>]

Legend(f[<span class=hljs-number >1</span>, <span class=hljs-number >2</span>], lins, string.(<span class=hljs-number >1</span>:length(lins)), nbanks = <span class=hljs-number >3</span>)

f</code></pre></p> <p> <a id=example_8199269684885548373 > <img src="/previews/PR1181/assets/examples/layoutables/legend/code/output/example_8199269684885548373.png" alt=""> </a> <h2 id=legend_inside_an_axis ><a href="#legend_inside_an_axis" class=header-anchor >Legend Inside An Axis</a></h2> <p>The <code>axislegend</code> function is a quick way to add a legend to an Axis. You can pass a selected axis plus arguments which are forwarded to the <code>Legend</code> constructor, or the current axis is used by default. If you pass only a string, it&#39;s used as the title with the current axis.</p> <p>The position can be set via a shortcut symbol, first halign &#40;l, r, c&#41; then valign &#40;b, t, c&#41;, such as :lt for left, top and :cb for center bottom.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CairoMakie

f = Figure()

ax = Axis(f[<span class=hljs-number >1</span>, <span class=hljs-number >1</span>])

sc1 = scatter!(randn(<span class=hljs-number >10</span>, <span class=hljs-number >2</span>), color = :red, label = <span class=hljs-string >&quot;Red Dots&quot;</span>)
sc2 = scatter!(randn(<span class=hljs-number >10</span>, <span class=hljs-number >2</span>), color = :blue, label = <span class=hljs-string >&quot;Blue Dots&quot;</span>)
scatter!(randn(<span class=hljs-number >10</span>, <span class=hljs-number >2</span>), color = :orange, label = <span class=hljs-string >&quot;Orange Dots&quot;</span>)
scatter!(randn(<span class=hljs-number >10</span>, <span class=hljs-number >2</span>), color = :cyan, label = <span class=hljs-string >&quot;Cyan Dots&quot;</span>)

axislegend()

axislegend(<span class=hljs-string >&quot;Titled Legend&quot;</span>, position = :lb)

axislegend(ax, [sc1, sc2], [<span class=hljs-string >&quot;One&quot;</span>, <span class=hljs-string >&quot;Two&quot;</span>], <span class=hljs-string >&quot;Selected Dots&quot;</span>, position = :rb,
    orientation = :horizontal)

f</code></pre></p> <p> <a id=example_8079969162601109406 > <img src="/previews/PR1181/assets/examples/layoutables/legend/code/output/example_8079969162601109406.png" alt=""> </a> <p>Alternatively, you can simply add a Legend to the same layout slot that an axis lives in. As long as the axis is bigger than the legend you can set the legend&#39;s <code>tellheight</code> and <code>tellwidth</code> to <code>false</code> and position it using the align variables. You can use the margin keyword to keep the legend from touching the axis spines.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CairoMakie

haligns = [:left, :right, :center]
valigns = [:top, :bottom, :center]

f = Figure()

Axis(f[<span class=hljs-number >1</span>, <span class=hljs-number >1</span>])

xs = <span class=hljs-number >0</span>:<span class=hljs-number >0.1</span>:<span class=hljs-number >10</span>
lins = [lines!(xs, sin.(xs .* i), color = color)
    <span class=hljs-keyword >for</span> (i, color) <span class=hljs-keyword >in</span> zip(<span class=hljs-number >1</span>:<span class=hljs-number >3</span>, [:red, :blue, :green])]

<span class=hljs-keyword >for</span> (j, ha, va) <span class=hljs-keyword >in</span> zip(<span class=hljs-number >1</span>:<span class=hljs-number >3</span>, haligns, valigns)
    Legend(
        f[<span class=hljs-number >1</span>, <span class=hljs-number >1</span>], lins, [<span class=hljs-string >&quot;Line <span class=hljs-variable >$i</span>&quot;</span> <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >3</span>],
        <span class=hljs-string >&quot;<span class=hljs-variable >$ha</span> &amp; <span class=hljs-variable >$va</span>&quot;</span>,
        tellheight = <span class=hljs-literal >false</span>,
        tellwidth = <span class=hljs-literal >false</span>,
        margin = (<span class=hljs-number >10</span>, <span class=hljs-number >10</span>, <span class=hljs-number >10</span>, <span class=hljs-number >10</span>),
        halign = ha, valign = va, orientation = :horizontal
    )
<span class=hljs-keyword >end</span>

f</code></pre></p> <p> <a id=example_6496361355257737470 > <img src="/previews/PR1181/assets/examples/layoutables/legend/code/output/example_6496361355257737470.png" alt=""> </a> <h2 id=creating_legend_entries_manually ><a href="#creating_legend_entries_manually" class=header-anchor >Creating Legend Entries Manually</a></h2> <p>Sometimes you might want to construct legend entries from scratch to have maximum control. So far you can use <code>LineElement</code>s, <code>MarkerElement</code>s or <code>PolyElement</code>s. The attributes for these elements are the following &#40;the <code>&#91;&#93;</code> parts can be left out when constructing these elements directly, but have to be fully written out for the attributes that the legend holds&#41;:</p> <pre><code class="julia hljs"><span class=hljs-comment ># LineElement</span>
[line]points, [line]color, linestyle, linewidth

<span class=hljs-comment ># MarkerElement</span>
[marker]points, marker, markersize, [marker]color,
[marker]strokewidth, [marker]strokecolor

<span class=hljs-comment ># PolyElement</span>
[poly]points, [poly]color, [poly]strokewidth, [poly]strokecolor</code></pre> <p>The attributes <code>linepoints</code>, <code>markerpoints</code> and <code>polypoints</code> decide where in the legend entry patch rectangle the plot objects are placed. These values should be normalized to a 1 by 1 rectangle, and the final shape depends on the <code>patchsize</code> of the legend. For example, if you want wider line and poly markers, you could set the <code>patchsize</code> of the legend to <code>&#40;50, 30&#41;</code>.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CairoMakie

f = Figure()

Axis(f[<span class=hljs-number >1</span>, <span class=hljs-number >1</span>])

elem_1 = [LineElement(color = :red, linestyle = <span class=hljs-literal >nothing</span>),
          MarkerElement(color = :blue, marker = <span class=hljs-string >&#x27;x&#x27;</span>, markersize = <span class=hljs-number >15</span>,
          strokecolor = :black)]

elem_2 = [PolyElement(color = :red, strokecolor = :blue, strokewidth = <span class=hljs-number >1</span>),
          LineElement(color = :black, linestyle = :dash)]

elem_3 = LineElement(color = :green, linestyle = <span class=hljs-literal >nothing</span>,
        points = Point2f0[(<span class=hljs-number >0</span>, <span class=hljs-number >0</span>), (<span class=hljs-number >0</span>, <span class=hljs-number >1</span>), (<span class=hljs-number >1</span>, <span class=hljs-number >0</span>), (<span class=hljs-number >1</span>, <span class=hljs-number >1</span>)])

elem_4 = MarkerElement(color = :blue, marker = <span class=hljs-string >&#x27;π&#x27;</span>, markersize = <span class=hljs-number >15</span>,
        points = Point2f0[(<span class=hljs-number >0.2</span>, <span class=hljs-number >0.2</span>), (<span class=hljs-number >0.5</span>, <span class=hljs-number >0.8</span>), (<span class=hljs-number >0.8</span>, <span class=hljs-number >0.2</span>)])

elem_5 = PolyElement(color = :green, strokecolor = :black, strokewidth = <span class=hljs-number >2</span>,
        points = Point2f0[(<span class=hljs-number >0</span>, <span class=hljs-number >0</span>), (<span class=hljs-number >1</span>, <span class=hljs-number >0</span>), (<span class=hljs-number >0</span>, <span class=hljs-number >1</span>)])

Legend(f[<span class=hljs-number >1</span>, <span class=hljs-number >2</span>],
    [elem_1, elem_2, elem_3, elem_4, elem_5],
    [<span class=hljs-string >&quot;Line &amp; Marker&quot;</span>, <span class=hljs-string >&quot;Poly &amp; Line&quot;</span>, <span class=hljs-string >&quot;Line&quot;</span>, <span class=hljs-string >&quot;Marker&quot;</span>, <span class=hljs-string >&quot;Poly&quot;</span>],
    patchsize = (<span class=hljs-number >35</span>, <span class=hljs-number >35</span>), rowgap = <span class=hljs-number >10</span>)

f</code></pre></p> <p> <a id=example_18300490621340887677 > <img src="/previews/PR1181/assets/examples/layoutables/legend/code/output/example_18300490621340887677.png" alt=""> </a> <h2 id=horizontal_legend ><a href="#horizontal_legend" class=header-anchor >Horizontal Legend</a></h2> <p>In case you want the legend entries to be listed horizontally, set the <code>orientation</code> attribute to <code>:horizontal</code>. In this case the <code>nbanks</code> attribute refers to the number of rows instead of columns. To keep an adjacent axis from potentially shrinking to the width of the horizontal legend, set <code>tellwidth &#61; false</code> and <code>tellheight &#61; true</code> if you place the legend below or above the axis.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CairoMakie

f = Figure()

Axis(f[<span class=hljs-number >1</span>, <span class=hljs-number >1</span>])

xs = <span class=hljs-number >0</span>:<span class=hljs-number >0.5</span>:<span class=hljs-number >10</span>
ys = sin.(xs)
lin = lines!(xs, ys, color = :blue)
sca = scatter!(xs, ys, color = :red, markersize = <span class=hljs-number >15</span>)

Legend(f[<span class=hljs-number >1</span>, <span class=hljs-number >2</span>], [lin, sca, lin], [<span class=hljs-string >&quot;a line&quot;</span>, <span class=hljs-string >&quot;some dots&quot;</span>, <span class=hljs-string >&quot;line again&quot;</span>])

Legend(f[<span class=hljs-number >2</span>, <span class=hljs-number >1</span>], [lin, sca, lin], [<span class=hljs-string >&quot;a line&quot;</span>, <span class=hljs-string >&quot;some dots&quot;</span>, <span class=hljs-string >&quot;line again&quot;</span>],
    orientation = :horizontal, tellwidth = <span class=hljs-literal >false</span>, tellheight = <span class=hljs-literal >true</span>)

f</code></pre></p> <p> <a id=example_10173715086820214783 > <img src="/previews/PR1181/assets/examples/layoutables/legend/code/output/example_10173715086820214783.png" alt=""> </a> <h2 id=multi-group_legends ><a href="#multi-group_legends" class=header-anchor >Multi-Group Legends</a></h2> <p>Sometimes a legend consists of multiple groups, for example in a plot where both marker size and color are varied and those properties need to be visualized separately, but still together in one legend. Each group&#39;s content is given as an array of elements and an array of labels, each within one collective array. You can shift the position of the titles relative to each group with the <code>titleposition</code> attribute, either <code>:left</code> or <code>:top</code>.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CairoMakie

f = Figure()

Axis(f[<span class=hljs-number >1</span>, <span class=hljs-number >1</span>])

markersizes = [<span class=hljs-number >5</span>, <span class=hljs-number >10</span>, <span class=hljs-number >15</span>, <span class=hljs-number >20</span>]
colors = [:red, :green, :blue, :orange]

<span class=hljs-keyword >for</span> ms <span class=hljs-keyword >in</span> markersizes, color <span class=hljs-keyword >in</span> colors
    scatter!(randn(<span class=hljs-number >5</span>, <span class=hljs-number >2</span>), markersize = ms, color = color)
<span class=hljs-keyword >end</span>

group_size = [MarkerElement(marker = :circle, color = :black,
    strokecolor = :transparent,
    markersize = ms) <span class=hljs-keyword >for</span> ms <span class=hljs-keyword >in</span> markersizes]

group_color = [PolyElement(color = color, strokecolor = :transparent)
    <span class=hljs-keyword >for</span> color <span class=hljs-keyword >in</span> colors]

legends = [Legend(f,
    [group_size, group_color],
    [string.(markersizes), string.(colors)],
    [<span class=hljs-string >&quot;Size&quot;</span>, <span class=hljs-string >&quot;Color&quot;</span>]) <span class=hljs-keyword >for</span> _ <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >6</span>]

f[<span class=hljs-number >1</span>, <span class=hljs-number >2</span>:<span class=hljs-number >4</span>] = legends[<span class=hljs-number >1</span>:<span class=hljs-number >3</span>]
f[<span class=hljs-number >2</span>:<span class=hljs-number >4</span>, <span class=hljs-number >2</span>] = legends[<span class=hljs-number >4</span>:<span class=hljs-number >6</span>]

<span class=hljs-keyword >for</span> l <span class=hljs-keyword >in</span> legends[<span class=hljs-number >4</span>:<span class=hljs-number >6</span>]
    l.orientation = :horizontal
    l.tellheight = <span class=hljs-literal >true</span>
    l.tellwidth = <span class=hljs-literal >false</span>
<span class=hljs-keyword >end</span>

legends[<span class=hljs-number >2</span>].titleposition = :left
legends[<span class=hljs-number >5</span>].titleposition = :left

legends[<span class=hljs-number >3</span>].nbanks = <span class=hljs-number >2</span>
legends[<span class=hljs-number >5</span>].nbanks = <span class=hljs-number >2</span>
legends[<span class=hljs-number >6</span>].nbanks = <span class=hljs-number >2</span>

f</code></pre></p> <p> <a id=example_13748480395996139778 > <img src="/previews/PR1181/assets/examples/layoutables/legend/code/output/example_13748480395996139778.png" alt=""> </a> <div class=page-foot > <div class=copyright > &copy; Makie.jl. Last modified: July 30, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> </div> <div class=page__footer > <footer> <div class=page__footer-follow > <ul class=social-icons > <li><a href="https://twitter.com/MakiePlots" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden=true ></i> Twitter</a> <li><a href="https://github.com/JuliaPlots/Makie.jl" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden=true ></i> GitHub</a> </ul> </div> <div class=page__footer-copyright >&copy; Makie.jl. Powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel=nofollow >Minimal Mistakes</a>.</div> </footer> </div> <script src="/previews/PR1181/libs/minimal-mistakes/main.min.js"></script> <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin=anonymous ></script>